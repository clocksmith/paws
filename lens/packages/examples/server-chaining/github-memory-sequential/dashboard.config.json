{
  "servers": [
    {
      "name": "github",
      "transport": {
        "type": "stdio",
        "command": "npx",
        "args": ["-y", "@modelcontextprotocol/server-github"],
        "env": {
          "GITHUB_PERSONAL_ACCESS_TOKEN": "${GITHUB_TOKEN}"
        }
      }
    },
    {
      "name": "memory",
      "transport": {
        "type": "stdio",
        "command": "npx",
        "args": ["-y", "@modelcontextprotocol/server-memory"],
        "env": {
          "MEMORY_STORE_PATH": "./.data/memory.json"
        }
      }
    },
    {
      "name": "sequential-thinking",
      "transport": {
        "type": "stdio",
        "command": "npx",
        "args": ["-y", "@modelcontextprotocol/server-sequential-thinking"]
      }
    }
  ],
  "widgets": [
    {
      "package": "@mwp/widget-github",
      "serverName": "github",
      "id": "github-review",
      "position": { "x": 0, "y": 0 },
      "size": { "w": 6, "h": 6 },
      "options": {
        "defaultView": "pull_requests",
        "autoSummarize": true,
        "onSummaryGenerated": {
          "event": "memory.write",
          "payloadTemplate": {
            "collection": "code-review",
            "tags": ["github", "summary"],
            "content": "{{summary}}"
          }
        }
      }
    },
    {
      "package": "@mwp/widget-memory",
      "serverName": "memory",
      "id": "memory-archive",
      "position": { "x": 6, "y": 0 },
      "size": { "w": 3, "h": 6 },
      "options": {
        "collections": ["code-review"],
        "subscribeTo": ["github-review"]
      }
    },
    {
      "package": "@mwp/widget-sequential-thinking",
      "serverName": "sequential-thinking",
      "id": "critique-assistant",
      "position": { "x": 9, "y": 0 },
      "size": { "w": 3, "h": 6 },
      "options": {
        "defaultPrompt": "code_critique",
        "memoryCollections": ["code-review"],
        "autoAttachMemory": true,
        "reviewChecklist": [
          "Summarize PR changes",
          "List risky areas",
          "Flag missing tests"
        ]
      }
    }
  ],
  "eventBridges": [
    {
      "source": "github-review",
      "on": "github:pull_request:summarized",
      "emit": "memory:write-requested"
    },
    {
      "source": "memory-archive",
      "on": "memory:write:succeeded",
      "emit": "sequential-thinking:prompt:update"
    }
  ],
  "errorHandling": {
    "retries": 2,
    "backoffMs": 1500,
    "onFailure": "memory:appendLog"
  }
}
